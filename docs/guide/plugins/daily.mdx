---
description: 意义不是很大的每日推送
---
import Command from "@site/src/components/Command";
import Example, { Send, Recv, Forward } from "@site/src/components/Example";
import PlaceholderLink from "@site/src/components/PlaceholderLink";

# daily
意义不是很大的每日推送

## 用户说明
在开启了每日推送的群里，你应该会每天早上收到类似于这样的消息（会有一点点长）：

<Example>
<Send>/今天</Send>
<Recv>七点几勒，起床先啦！各位兽受们早上好</Recv>
<Recv>
<Forward collapsed>
<Recv>

昨天最能水的成员：
🥇 su226 - 5 条
</Recv>
<Recv>

![绒狸每日鉴毛例图](/example/furbot/daily.jpg)
</Recv>
<Recv>

今天是：
距su226的生日还剩85天
</Recv>
<Recv>

今天是10月16日，历史上的今天是：
1553 - 德国画家老卢卡斯·克拉纳赫逝世
1642 - 明朝崇祯皇帝的妃子田秀英去世
1758 - 美国辞典编纂者诺亚·韦伯斯特出生
1793 - 法国国王路易十六的王后玛丽·安托瓦内特逝世
1806 - 俄土战争再起
1813 - 莱比锡会战爆发
1841 - 日本首相伊藤博文出生
1846 - 人类首次公开使用乙醚止痛
1854 - 德国社会主义活动家卡尔·考茨基出生
1854 - 英国作家王尔德诞辰
1913 - 中国物理学家、“两弹一星”元勋钱三强出生
1943 - 日本大正天皇的生母柳原爱子去世
1945 - 联合国粮食及农业组织成立
1949 - 中国与蒙古国建交
1959 - 美国前国务卿马歇尔逝世
</Recv>
<Recv>

![摸鱼日历例图](/example/daily/moyu.png)
你可以发送 /摸鱼 再次查看
</Recv>
<Recv>

![60秒例图](/example/daily/60s.png)
你可以发送 /60秒 再次查看
</Recv>
<Recv>

![每日一句例图](/example/daily/sentence.png)
你可以发送 /一句 再次查看
</Recv>
</Forward>
</Recv>
</Example>

你也可以发送以下命令主动查看：

<Command name="今天" brief="今天的问好你看了吗" perm="daily.today">
包含 /摸鱼、/60s 和 /一句 的内容
</Command>
<Command name="历史" brief="看看历史上的今天" perm="daily.history">
接口来自https://www.ipip5.com/today/
</Command>
<Command name={["摸鱼日历", "摸鱼"]} brief="今天也要开心摸鱼哦" perm="daily.moyu">
接口来自https://api.j4u.ink
</Command>
<Command name={["60秒", "60s"]} brief="用60秒迅速看世界" perm="daily.news">
接口来自https://api.qqsuu.cn
</Command>
<Command name={["每日一句", "一句"]} brief="是中英双语的" perm="daily.sentence">
接口来自http://open.iciba.com
</Command>

<Example collapsed>
<Send>/历史</Send>
<Recv>

今天是10月16日，历史上的今天是：
1553 - 德国画家老卢卡斯·克拉纳赫逝世
1642 - 明朝崇祯皇帝的妃子田秀英去世
1758 - 美国辞典编纂者诺亚·韦伯斯特出生
1793 - 法国国王路易十六的王后玛丽·安托瓦内特逝世
1806 - 俄土战争再起
1813 - 莱比锡会战爆发
1841 - 日本首相伊藤博文出生
1846 - 人类首次公开使用乙醚止痛
1854 - 德国社会主义活动家卡尔·考茨基出生
1854 - 英国作家王尔德诞辰
1913 - 中国物理学家、“两弹一星”元勋钱三强出生
1943 - 日本大正天皇的生母柳原爱子去世
1945 - 联合国粮食及农业组织成立
1949 - 中国与蒙古国建交
1959 - 美国前国务卿马歇尔逝世

</Recv>
</Example>
<Example collapsed>
<Send>/摸鱼日历</Send>
<Recv>

![摸鱼日历例图](/example/daily/moyu.png)
</Recv>
</Example>
<Example collapsed>
<Send>/60秒</Send>
<Recv>

![60秒例图](/example/daily/60s.png)
</Recv>
</Example>
<Example collapsed>
<Send>/每日一句</Send>
<Recv>

![每日一句例图](/example/daily/sentence.png)
</Recv>
<Recv><audio controls src="/example/daily/sentence.mp3" /></Recv>
</Example>

:::caution
似乎[今日兽兽的上游](https://github.com/ye-tutu/nonebot_plugin_everyfurry)停更了，现在运行 /今日兽兽 得到“似乎没有今日兽兽”是正常现象，这不是 IdhagnBot 的问题。
:::

<Command name={"今日兽兽"} perm="daily.everyfurry">
接口来自https://hifurry.cn
</Command>
<Example>
<Send>/今日兽兽</Send>
<Recv>似乎没有今日兽兽</Recv>
</Example>

:::tip
主动查看每日鉴毛、发言排行和 EPIC 喜加一的功能分别位于插件 [furbot](/docs/guide/plugins/furbot)、<PlaceholderLink href="/docs/guide/plugins/wordcloud">wordcloud</PlaceholderLink> 和 <PlaceholderLink href="/docs/guide/plugins/epicfree">epicfree</PlaceholderLink>，并不是本插件。

在私聊中发送“/今天”不会显示排行。~~废话，私聊哪来群员~~
:::

## 搭建说明
你需要修改 `configs/daily.yaml`，加上需要推送的群聊，绒狸每日鉴毛还需[配置绒狸 Token](/docs/guide/plugins/furbot#搭建说明)。
```yaml
default_time: 07:00:00 # 推送时间，默认为 07:00:00
default_modules: # 要发送的内容，默认为空，以下为包含全部模块的示例
- type: string # 固定的字符串
  string: 七点几勒，起床先啦！各位兽受们早上好
- # 被数组包裹的内容将会作为合并转发发送，由于协议端限制，只能包裹一层
  - type: epicgames # EPIC 喜加一（只有今天可以领的游戏和昨天不同时才会显示）
  - type: rank # 水群排行（需安装 SQL 相关依赖：pdm install -G sql）
    limit: 10 # 最大排行长度，默认为 10
  - type: furbot # 绒狸每日鉴毛（需配置绒狸 Token）
  - type: everyfurry # 今日兽兽（上游似乎停更，不建议继续使用）
  - type: countdown # 倒计时
    countdowns:
    - date: 2023-01-09
      before: 距su226的生日还剩{}天 # 日期之前显示的内容，{} 会被替换为天数，省略时不显示
      exact: 祝su226生日快乐 # 恰好当天时显示的内容，省略时不显示
      after: su226的生日已过了{}天 # 日期之后显示的内容，{} 会被替换为天数，省略时不显示
  - type: history # 历史上的今天
  - type: moyu # 摸鱼日历
  - type: news # 60秒看世界
  - type: sentence # 每日一句（不包括语音）
groups:
  123456789: {} # 要推送的群，可以指定多个
  987654321: # 也可以为每个群单独覆盖配置
    time: 07:01:00 # 建议稍微错开时间，如 07:00、07:01 等，以防发送失败
    modules: [] # 覆盖要发送的内容
  -1: {} # 你也可以使用 -1 来单独配置私聊显示的内容，注意私聊并不会定时推送。
```

状态文件在 `states/daily.yaml`，参考如下：
:::caution
你通常不应该修改状态文件，除非别无选择。
:::
```yaml
last_send: # 上次发送的日期，用于判断是否已经发送过。
  123456789: '2022-10-16'
  987654321: '2022-10-16'
```
